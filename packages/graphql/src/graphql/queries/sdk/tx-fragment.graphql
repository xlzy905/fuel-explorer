fragment TransactionStatus on TransactionStatus {
  __typename
  ... on SqueezedOutStatus {
    reason
  }
  ... on SuccessStatus {
    time
    block {
      id
      header {
        id
        height
        daHeight
        applicationHash
        messageReceiptCount
        time
      }
    }
    programState {
      data
    }
  }
  ... on FailureStatus {
    totalFee
    totalGas
    time
    programState {
      data
    }
  }
  ... on SubmittedStatus {
    time
  }
}

fragment TransactionInput on Input {
  __typename
  ... on InputCoin {
    amount
    amountInUsd
    assetId
    owner
    predicate
    predicateData
    txPointer
    utxoId
    witnessIndex
    name
    symbol
    icon
    contractId
    decimals
    suspicious
  }
  ... on InputContract {
    utxoId
    balanceRoot
    txPointer
    contractId
  }
  ... on InputMessage {
    sender
    recipient
    amount
    nonce
    data
    predicate
    predicateData
  }
}

fragment TransactionOutput on Output {
  __typename
  ... on CoinOutput {
    to
    amount
    amountInUsd
    assetId
    name
    symbol
    icon
    contractId
    decimals
    suspicious
  }
  ... on ContractOutput {
    inputIndex
    balanceRoot
  }
  ... on ChangeOutput {
    to
    amount
    amountInUsd
    assetId
    name
    symbol
    icon
    contractId
    decimals
    suspicious
  }
  ... on VariableOutput {
    to
    amount
    amountInUsd
    assetId
    name
    symbol
    icon
    contractId
    decimals
    suspicious
  }
  ... on ContractCreated {
    contract
  }
}

fragment TransactionReceipt on Receipt {
  __typename
  id
  to
  pc
  is
  toAddress
  amount
  assetId
  gas
  param1
  param2
  val
  ptr
  digest
  reason
  ra
  rb
  rc
  rd
  len
  receiptType
  result
  gasUsed
  data
  sender
  recipient
  nonce
  contractId
  subId
  name
  symbol
  icon
  decimals
  suspicious
}

fragment InnerReceiptItem on OperationReceipt {
  item {
    ...TransactionReceipt
  }
}

fragment OperationReceiptItem on OperationReceipt {
  ...InnerReceiptItem
  receipts {
    ...InnerReceiptItem
    receipts {
      ...InnerReceiptItem
      receipts {
        ...InnerReceiptItem
      }
    }
  }
}

fragment OperationItem on Operation {
  __typename
  type
  receipts {
    ...OperationReceiptItem
    receipts {
      ...OperationReceiptItem
      receipts {
        ...OperationReceiptItem
        receipts {
          ...OperationReceiptItem
          receipts {
            ...OperationReceiptItem
          }
        }
      }
    }
  }
}

fragment TxDetailsGroupedInputCoin on GroupedInputCoin {
  type
  totalAmount
  owner
  assetId
  inputs {
    ... on InputCoin {
      amount
      utxoId
    }
  }
}

fragment TxDetailsGroupedInputMessage on GroupedInputMessage {
  type
  sender
  data
  recipient
}

fragment TxDetailsGroupedInputContract on GroupedInputContract {
  type
  contractId
}

fragment TxDetailsGroupedOutputCoin on GroupedOutputCoin {
  type
  assetId
  totalAmount
  to
  outputs {
    __typename
  }
}

fragment TxDetailsGroupedOutputChanged on GroupedOutputChanged {
  type
  assetId
  totalAmount
  to
  outputs {
    __typename
  }
}

fragment TxDetailsGroupedOutputContractCreated on GroupedOutputContractCreated {
  type
  contractId
}

fragment TransactionItem on Transaction {
  # Custom resolvers
  id
  blockHeight
  gasCosts {
    fee
    feeInUsd
    gasUsed
  }
  groupedInputs {
    __typename
    ...TxDetailsGroupedInputContract
    ...TxDetailsGroupedInputCoin
    ...TxDetailsGroupedInputMessage
  }
  groupedOutputs {
    __typename
    ...TxDetailsGroupedOutputCoin
    ...TxDetailsGroupedOutputChanged
    ...TxDetailsGroupedOutputContractCreated
  }
  operations {
    ...OperationItem
  }
  receipts {
    ...TransactionReceipt
  }
  hasPredicate
  statusType
  title
  time {
    fromNow
    full
    rawUnix
  }

  # Transaction Data
  __typename
  maturity
  txPointer
  isScript
  isCreate
  isMint
  mintedAsset {
    assetId
    name
    symbol
    icon
    contractId
    subId
  }
  witnesses
  receiptsRoot
  script
  scriptData
  bytecodeWitnessIndex
  salt
  storageSlots
  rawPayload
  mintAmount
  mintAmountUsd
  mintAssetId
  inputContract {
    contractId
  }
  outputContract {
    inputIndex
  }
  status {
    ...TransactionStatus
  }
  inputAssetIds
  inputContracts
  inputs {
    ...TransactionInput
  }
  outputs {
    ...TransactionOutput
  }
}
